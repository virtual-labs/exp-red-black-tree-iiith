<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-03-17 Wed 07:41 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="VLEAD" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2017 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org025653b">1. Javascript code for Red Blactree practice</a>
<ul>
<li><a href="#orgf128d3e">1.1. Constructor for the red black tree. It takes the canvas as 'am', width and heigh as parameters</a></li>
<li><a href="#org4ec04e8">1.2. Function that adds controls to the top bar of the artefacts and shows buttons and text boxes.</a></li>
<li><a href="#orge66d91d">1.3. Function resets the operations that were done on the tree.</a></li>
<li><a href="#orgb35f4f9">1.4. Declaration of variables for positioning the artefacts</a></li>
<li><a href="#orgddc342a">1.5. Callback function for generating  the root node</a></li>
<li><a href="#org6725067">1.6. This function is called when the user submits the answer on the exercise page to be checked</a></li>
<li><a href="#org9d6deb5">1.7. Function is called when the user wants to know the step by step solution to the exercise problem. This is done by click show steps button</a></li>
<li><a href="#org74b4b04">1.8. Callback functions for steps</a></li>
<li><a href="#orgd8358f2">1.9. Function is called whenever an insert operation is performed on the tree after click the Insert Button rendered on the UI.</a></li>
<li><a href="#org7c4aa00">1.10. Function is called whenever a delete operation is performed on the tree and handles the delete operation.</a></li>
<li><a href="#org0057455">1.11. Function called when a find/search operation is performed on the tree.</a></li>
<li><a href="#orga8b4d34">1.12. Function is called when the print functionality of the tree is invoked.</a></li>
<li><a href="#org105a6b6">1.13. Function to display all the Null leaves.</a></li>
<li><a href="#org9c3fe17">1.14. Function prints the tree nodes, essentially performs a traversal on the tree.</a></li>
<li><a href="#org7641636">1.15. Function prints the tree in a recursive order.</a></li>
<li><a href="#org3d33ad2">1.16. Function performs the find functionality on the tree, receives the element to be searched in the arguments.</a></li>
<li><a href="#org37a120d">1.17. Function to determine the uncle node</a></li>
<li><a href="#org3e87c6c">1.18. Function to return the black level</a></li>
<li><a href="#org008bf34">1.19. Function to attach null leaves to a node</a></li>
<li><a href="#org80c125c">1.20. Wrapper Function to insert node into a red black tree</a></li>
<li><a href="#org7ef27e0">1.21. Function to handle single rotation of the tree</a></li>
<li><a href="#org30f8a53">1.22. Function to return height and reset height</a></li>
<li><a href="#org22e84fc">1.23. Function to implement the actual insert algorithm of the red black tree.</a></li>
<li><a href="#org11f88dd">1.24. Function to fix double red case in red black tree.</a></li>
<li><a href="#org12502c5">1.25. Wrapper function for delete operation.</a></li>
<li><a href="#org69e81af">1.26. Fixing Null leaves</a></li>
<li><a href="#orgc649af7">1.27. Function to fix extra black node.</a></li>
<li><a href="#org982024d">1.28. Fixing double black nodes</a></li>
<li><a href="#org9d8e9c3">1.29. Deletion Algorithm</a></li>
<li><a href="#org1642df5">1.30. Function to fix the node color.</a></li>
<li><a href="#orgbdd6443">1.31. Function resizes the tree according to the start_x and start_y coordinate.</a></li>
<li><a href="#orge0bcffe">1.32. Function to calculate new positions.</a></li>
<li><a href="#org9c440a5">1.33. Function resizes width according to initial positions.</a></li>
<li><a href="#org4af10c9">1.34. Function disables the UI during the animation play so that no other operation or control is available while animation is being played out.</a></li>
<li><a href="#org413d484">1.35. Function enables click on the UI after the animation has been played out</a></li>
<li><a href="#org29a93d5">1.36. Function takes in the id, intial pos_X and pos_Y and initialises the tree node.</a></li>
<li><a href="#org5fe1116">1.37. Function initialises the canvas on which the tree is rendered and is called first from the UI.</a></li>
</ul>
</li>
<li><a href="#orgb4fcb04">2. Tangle</a></li>
</ul>
</div>
</div>

<div id="outline-container-org025653b" class="outline-2">
<h2 id="org025653b"><span class="section-number-2">1</span> Javascript code for Red Blactree practice</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgf128d3e" class="outline-3">
<h3 id="orgf128d3e"><span class="section-number-3">1.1</span> Constructor for the red black tree. It takes the canvas as 'am', width and heigh as parameters</h3>
<div class="outline-text-3" id="text-1-1">
<p>
+We are doing a sort of "faked" inheritance within javascript. We define our function, 
set the prototype of our function to the prototype of our superclass, 
reset the constructor to be our own constructor, 
and then cache the superclass prototype, for simulating a java-style "super" call. 
</p>

<p>
+Notice that to make inheritance work well on counstructors, we don't do anything 
in the main constructor function other than call an 
init function (that way we can have our init function call the init 
function of the superclass. Yes, this is a bit of a hack.)
</p>
<div class="org-src-container">
<pre class="src src-js" id="orgaa8d5a0">
<span style="font-weight: bold;">function</span> <span style="font-weight: bold;">displayComment</span>(<span style="font-weight: bold; font-style: italic;">text</span>)
{
        $(<span style="font-style: italic;">'#nextcomment'</span>).html(text);
}

<span style="font-weight: bold;">function</span> <span style="font-weight: bold;">RedBlack</span>(<span style="font-weight: bold; font-style: italic;">am</span>, <span style="font-weight: bold; font-style: italic;">w</span>, <span style="font-weight: bold; font-style: italic;">h</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.init(am, w, h);
}

RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span> = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">Algorithm</span>();
RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.constructor = RedBlack;
RedBlack.superclass = Algorithm.<span style="font-weight: bold; text-decoration: underline;">prototype</span>;

RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.init = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">am</span>, <span style="font-weight: bold; font-style: italic;">w</span>, <span style="font-weight: bold; font-style: italic;">h</span>)
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">sc</span> = RedBlack.superclass;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">fn</span> = sc.init;
        fn.call(<span style="font-weight: bold; text-decoration: underline;">this</span>,am);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.addControls();
        <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex = 1;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.commands = [];
        <span style="font-weight: bold; text-decoration: underline;">this</span>.startingX = w / 3;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.print_max  = w - PRINT_HORIZONTAL_GAP;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.first_print_pos_y  = h - 2 * PRINT_VERTICAL_GAP;

        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateLabel"</span>, 0, <span style="font-style: italic;">""</span>, EXPLANITORY_TEXT_X, EXPLANITORY_TEXT_Y, 0);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.animationManager.StartNewAnimation(<span style="font-weight: bold; text-decoration: underline;">this</span>.commands);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.animationManager.skipForward();
        <span style="font-weight: bold; text-decoration: underline;">this</span>.animationManager.clearHistory();
}

</pre>
</div>
</div>
</div>

<div id="outline-container-org4ec04e8" class="outline-3">
<h3 id="org4ec04e8"><span class="section-number-3">1.2</span> Function that adds controls to the top bar of the artefacts and shows buttons and text boxes.</h3>
<div class="outline-text-3" id="text-1-2">
<p>
+Next up is the method to add algorithm controls and callbacks. 
The tricky bit here is that we can't do something like:
this.popButton.onclick = this.popCallback
to add our callbacks. 
</p>

<p>
+Why not? 
This would pass in the proper function, but not the proper contex &#x2013; essentially, 
it would be passing a pointer to the code of the function, without saving the "this" pointer. 
</p>

<p>
+So we need to bind the "this" pointer to our function before we store it.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org90602ee">



RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.addControls =  <span style="font-weight: bold;">function</span>()
{
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertButton = document.getElementById(<span style="font-style: italic;">"control-exer-root"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertButton.onclick = <span style="font-weight: bold; text-decoration: underline;">this</span>.generateCallback.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertLeftButton = document.getElementById(<span style="font-style: italic;">"control-exer-insert-l"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertLeftButton.onclick=<span style="font-weight: bold; text-decoration: underline;">this</span>.insertLeftCallback.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertRightButton = document.getElementById(<span style="font-style: italic;">"control-exer-insert-r"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertRightButton.onclick=<span style="font-weight: bold; text-decoration: underline;">this</span>.insertRightCallback.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.leftrotateButton = document.getElementById(<span style="font-style: italic;">"control-exer-rotate-l"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.leftrotateButton.onclick=<span style="font-weight: bold; text-decoration: underline;">this</span>.leftrotateCallback.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.rightrotateButton = document.getElementById(<span style="font-style: italic;">"control-exer-rotate-r"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.rightrotateButton.onclick=<span style="font-weight: bold; text-decoration: underline;">this</span>.rightrotateCallback.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.submitButton = document.getElementById(<span style="font-style: italic;">"control-exer-submit"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.submitButton.onclick=<span style="font-weight: bold; text-decoration: underline;">this</span>.submitCallback.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.showStepsButton = document.getElementById(<span style="font-style: italic;">"control-exer-steps"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.showStepsButton.onclick=<span style="font-weight: bold; text-decoration: underline;">this</span>.showStepsCallBack.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.showStepsButton.disabled=<span style="font-weight: bold; text-decoration: underline;">true</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.showStepsButton.style.backgroundColor=<span style="font-style: italic;">"gray"</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.showStepsButton.style.border=<span style="font-style: italic;">"gray"</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.resetButton = document.getElementById(<span style="font-style: italic;">"control-exer-reset"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.resetButton.onclick=<span style="font-weight: bold; text-decoration: underline;">this</span>.reset.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>); 
        <span style="font-weight: bold; text-decoration: underline;">this</span>.showNullLeaves = document.getElementById(<span style="font-style: italic;">"control-exer-null"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.showNullLeaves.onclick = <span style="font-weight: bold; text-decoration: underline;">this</span>.showNullLeavesCallback.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.showNullLeaves.checked = <span style="font-weight: bold; text-decoration: underline;">false</span>;

}

</pre>
</div>
</div>
</div>



<div id="outline-container-orge66d91d" class="outline-3">
<h3 id="orge66d91d"><span class="section-number-3">1.3</span> Function resets the operations that were done on the tree.</h3>
<div class="outline-text-3" id="text-1-3">
<p>
+All visualizations must implement the reset method. 
The reset method needs to restore all of our variables to the state that they were 
in right after the call to init. 
</p>


<div class="org-src-container">
<pre class="src src-js" id="orgda18982">

RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.reset = <span style="font-weight: bold;">function</span>()
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex = 1;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot = <span style="font-weight: bold; text-decoration: underline;">null</span>;
        ptr=1;
        stepschosen=[];
        document.getElementById(<span style="font-style: italic;">"nextcomment"</span>).innerHTML=<span style="font-style: italic;">""</span>;
        document.getElementById(<span style="font-style: italic;">"nextelement"</span>).innerHTML=<span style="font-style: italic;">""</span>;
        <span style="font-weight: bold;">for</span>(k=0;k&lt;insertedvaluelist.length;k++)
        {
                        animationManager.skipBack();
                
        }
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertButton.disabled=<span style="font-weight: bold; text-decoration: underline;">false</span>
}
</pre>
</div>
</div>
</div>



<div id="outline-container-orgb35f4f9" class="outline-3">
<h3 id="orgb35f4f9"><span class="section-number-3">1.4</span> Declaration of variables for positioning the artefacts</h3>
<div class="outline-text-3" id="text-1-4">
<div class="org-src-container">
<pre class="src src-js" id="org62642b6">

<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">FIRST_PRINT_POS_X</span> = 50;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">PRINT_VERTICAL_GAP</span> = 20;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">PRINT_HORIZONTAL_GAP</span> = 50;


<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">FOREGROUND_RED</span> = <span style="font-style: italic;">"#AA0000"</span>;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">BACKGROUND_RED</span> = <span style="font-style: italic;">"#FFAAAA"</span>;

<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">FOREGROUND_BLACK</span> =  <span style="font-style: italic;">"#000000"</span>
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">BACKGROUND_BLACK</span> = <span style="font-style: italic;">"#AAAAAA"</span>;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">BACKGROUND_DOUBLE_BLACK</span> = <span style="font-style: italic;">"#777777"</span>;


<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">HIGHLIGHT_LABEL_COLOR</span> = <span style="font-style: italic;">"#FF0000"</span>
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">HIGHLIGHT_LINK_COLOR</span> = <span style="font-style: italic;">"#FF0000"</span>

<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">BLUE</span> = <span style="font-style: italic;">"#0000FF"</span>;

<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">LINK_COLOR</span> = <span style="font-style: italic;">"#000000"</span>
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">BACKGROUND_COLOR</span> = BACKGROUND_BLACK;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">HIGHLIGHT_COLOR</span> = <span style="font-style: italic;">"#007700"</span>;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">FOREGROUND_COLOR</span> = FOREGROUND_BLACK;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">PRINT_COLOR</span> = FOREGROUND_COLOR

<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">widthDelta</span>  = 50;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">heightDelta</span> = 50;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">startingY</span> = 50;


<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">FIRST_PRINT_POS_X</span>  = 20;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">PRINT_VERTICAL_GAP</span>  = 20;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">PRINT_HORIZONTAL_GAP</span> = 50;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">EXPLANITORY_TEXT_X</span> = 10;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">EXPLANITORY_TEXT_Y</span> = 10;
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">insertedvaluelist</span>=[3,2,5,10,12];
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">steps</span>=[<span style="font-style: italic;">"left"</span>,<span style="font-style: italic;">"right"</span>,<span style="font-style: italic;">"right"</span>,<span style="font-style: italic;">"rightrotate"</span>]
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">reasons</span>=[<span style="font-style: italic;">"2 is lessser than 3,hence we go left"</span>,<span style="font-style: italic;">"5 is greater than 3,hence we go right"</span>,
<span style="font-style: italic;">"10 is greater than 3,no imbalance caused"</span>,<span style="font-style: italic;">"12 is greater than 3,rotation done to remove imbalance"</span>]
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">ptr</span>=1



</pre>
</div>
</div>
</div>

<div id="outline-container-orgddc342a" class="outline-3">
<h3 id="orgddc342a"><span class="section-number-3">1.5</span> Callback function for generating  the root node</h3>
<div class="outline-text-3" id="text-1-5">
<p>
+The callback function generates the root node of the tree to be displayed on the screen.
+The insertedvaluelist contains the nodes to be displayed.And the first element of this array is being rendered on the screen.
</p>


<div class="org-src-container">
<pre class="src src-js" id="orgf6e3dad">
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">stepschosen</span>=[]
RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.generateCallback=<span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">insertedValue</span> = parseInt(insertedvaluelist[0],10);
                <span style="font-weight: bold;">if</span> (insertedValue != <span style="font-style: italic;">""</span>)
                {
                        
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.implementAction(<span style="font-weight: bold; text-decoration: underline;">this</span>.insertElement.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>), insertedValue);
                                
                                        document.getElementById(<span style="font-style: italic;">"nextelement"</span>).innerHTML=insertedvaluelist[1]
                                
                                        
                }
                <span style="font-weight: bold; text-decoration: underline;">this</span>.insertButton.disabled=<span style="font-weight: bold; text-decoration: underline;">true</span>;
                
        
}

</pre>
</div>
</div>
</div>


<div id="outline-container-org6725067" class="outline-3">
<h3 id="org6725067"><span class="section-number-3">1.6</span> This function is called when the user submits the answer on the exercise page to be checked</h3>
<div class="outline-text-3" id="text-1-6">
<p>
+When the user clicks the submit button, this function is called.
</p>

<p>
+This function submits the answer for checking and activates the show steps button.
</p>

<p>
+This also shows the user, the first step where they went wrong.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org9247adb">RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.submitCallback=<span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        
        i=0;
        wrong=<span style="font-weight: bold; text-decoration: underline;">false</span>
        wrongsteps=[];
        <span style="font-weight: bold;">for</span>(i=0;i&lt;steps.length;i++)
        {
                <span style="font-weight: bold;">if</span>(steps[i]!=stepschosen[i])
                {
                        wrongsteps.push(i)
                        wrong=<span style="font-weight: bold; text-decoration: underline;">true</span>;
                        <span style="font-weight: bold;">break</span>;
                }
                
                
        };
        
        <span style="font-weight: bold;">if</span>(wrong==<span style="font-weight: bold; text-decoration: underline;">false</span>)
        {
                
                
                document.getElementById(<span style="font-style: italic;">"nextcomment"</span>).innerHTML=<span style="font-style: italic;">"Correct.All steps chosen are correct."</span>
                
        }
        <span style="font-weight: bold;">else</span>
        {
                        string1=<span style="font-style: italic;">"Wrong Answer\n.First Step where you went wrong."</span>
                        
                                string1=string1+reasons[wrongsteps[0]]+<span style="font-style: italic;">"\n"</span>;
                                
                        
                        document.getElementById(<span style="font-style: italic;">"nextcomment"</span>).innerHTML=string1;
                        
                
                
        }
        
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">k</span>=1;
        
        ptr=1;
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.showStepsButton.disabled=<span style="font-weight: bold; text-decoration: underline;">false</span>;    
        <span style="font-weight: bold; text-decoration: underline;">this</span>.showStepsButton.style.backgroundColor=<span style="font-style: italic;">"#3297CF"</span>;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.showStepsButton.style.border=<span style="font-style: italic;">"#3297CF"</span>;
        
        
        
        
        
        
}

</pre>
</div>
</div>
</div>


<div id="outline-container-org9d6deb5" class="outline-3">
<h3 id="org9d6deb5"><span class="section-number-3">1.7</span> Function is called when the user wants to know the step by step solution to the exercise problem. This is done by click show steps button</h3>
<div class="outline-text-3" id="text-1-7">
<p>
+After the user has submitted the answer for exercise. We provide the facility to check the answer step by step.
</p>

<p>
+This button is activated only after a submission.
</p>


<div class="org-src-container">
<pre class="src src-js" id="org8af3b27">



RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.showStepsCallBack=<span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        
        

                <span style="font-weight: bold;">if</span>(ptr&lt;insertedvaluelist.length){
                console.log(<span style="font-style: italic;">"hey"</span>)
                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">insertedValue</span> = parseInt(insertedvaluelist[ptr],10);
                console.log(insertedValue)


                <span style="font-weight: bold;">if</span> (insertedValue != <span style="font-style: italic;">""</span>)
                {

                        <span style="font-weight: bold; text-decoration: underline;">this</span>.implementAction(<span style="font-weight: bold; text-decoration: underline;">this</span>.insertElement.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>), insertedValue);
                        <span style="font-weight: bold;">if</span>(ptr+1&lt;insertedvaluelist.length)
                        document.getElementById(<span style="font-style: italic;">"nextelement"</span>).innerHTML=insertedvaluelist[ptr+1]
                        <span style="font-weight: bold;">else</span>
                        document.getElementById(<span style="font-style: italic;">"nextelement"</span>).innerHTML=<span style="font-style: italic;">"No More Values to insert"</span>

                }

        }
        
        
        ptr=ptr+1

}
</pre>
</div>
</div>
</div>


<div id="outline-container-org74b4b04" class="outline-3">
<h3 id="org74b4b04"><span class="section-number-3">1.8</span> Callback functions for steps</h3>
<div class="outline-text-3" id="text-1-8">
<p>
+The below callback functions keep track of the steps the user has selected while exploring 
the artefacts.
+The leftrotate callback inserts the leftrotate step into the stepschosen array, which would be later used for checking the right stpes.
</p>


<div class="org-src-container">
<pre class="src src-js" id="orge806950">RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.leftrotateCallback=<span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        
        document.getElementById(<span style="font-style: italic;">"nextcomment"</span>).innerHTML=<span style="font-style: italic;">"Step chosen: insert left and rotate"</span>
        stepschosen.push(<span style="font-style: italic;">"leftrotate"</span>)
        <span style="font-weight: bold; text-decoration: underline;">this</span>.shownext(<span style="font-weight: bold; text-decoration: underline;">this</span>)
        ptr+=1
}

</pre>
</div>

<p>
+The rightrotate callback inserts the rightrotate step into the stepschosen array, which would be later used for checking the right stpes.
</p>


<div class="org-src-container">
<pre class="src src-js" id="org4e88268">



RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.rightrotateCallback=<span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        
        document.getElementById(<span style="font-style: italic;">"nextcomment"</span>).innerHTML=<span style="font-style: italic;">"Step chosen: insert right and rotate"</span>
        stepschosen.push(<span style="font-style: italic;">"righrotate"</span>)
        <span style="font-weight: bold; text-decoration: underline;">this</span>.shownext(<span style="font-weight: bold; text-decoration: underline;">this</span>)
        ptr+=1
        
        
}
</pre>
</div>

<p>
+The shownext callback displays the next element to be inserted onto the given tree.
+Based on this value,user would know which step to choose next.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org114bef7">




RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.shownext=<span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        <span style="font-weight: bold;">if</span>(ptr+1&lt;insertedvaluelist.length)
                document.getElementById(<span style="font-style: italic;">"nextelement"</span>).innerHTML=insertedvaluelist[ptr+1]
        <span style="font-weight: bold;">else</span>
                document.getElementById(<span style="font-style: italic;">"nextelement"</span>).innerHTML=<span style="font-style: italic;">"No more values to insert"</span>
                
}

</pre>
</div>

<p>
+The insertright callback inserts the insert right step into the stepschosen array, which would be later used for checking the right stpes.
</p>


<div class="org-src-container">
<pre class="src src-js" id="org8b73142">




RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.insertRightCallback=<span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        document.getElementById(<span style="font-style: italic;">"nextcomment"</span>).innerHTML=<span style="font-style: italic;">"Step chosen: insert right"</span>
        stepschosen.push(<span style="font-style: italic;">"right"</span>)
        <span style="font-weight: bold; text-decoration: underline;">this</span>.shownext(<span style="font-weight: bold; text-decoration: underline;">this</span>)
        ptr+=1

}

</pre>
</div>

<p>
+The  insertLeftCallback  inserts the insertLeftCallback  step into the stepschosen array, which would be later used for checking the right steps.
</p>


<div class="org-src-container">
<pre class="src src-js" id="orgd3fa6eb">



RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.insertLeftCallback = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        
        
        document.getElementById(<span style="font-style: italic;">"nextcomment"</span>).innerHTML=<span style="font-style: italic;">"Step chosen: insert left"</span>
        stepschosen.push(<span style="font-style: italic;">"left"</span>)
        <span style="font-weight: bold; text-decoration: underline;">this</span>.shownext(<span style="font-weight: bold; text-decoration: underline;">this</span>)
        ptr+=1
        
        
}
</pre>
</div>
</div>
</div>


<div id="outline-container-orgd8358f2" class="outline-3">
<h3 id="orgd8358f2"><span class="section-number-3">1.9</span> Function is called whenever an insert operation is performed on the tree after click the Insert Button rendered on the UI.</h3>
<div class="outline-text-3" id="text-1-9">
<p>
+The insert callback function does not perform any insert operation on its own. It makes a call to the implementAction function, the implement action function receives two arguments - a bounded function and the value to be inserted in to the tree. 
+The implementAction function then makes a call to the function it receives along the value to be inserted. The insert operation is performed thereafter.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org7584211">
RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.insertCallback = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>,<span style="font-weight: bold; font-style: italic;">k</span>)
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">insertedValue</span> = parseInt(insertedvaluelist[k],10);
        console.log(<span style="font-style: italic;">"inserting"</span>,insertedValue)
        <span style="font-weight: bold;">if</span> (insertedValue != <span style="font-style: italic;">""</span>)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.implementAction(<span style="font-weight: bold; text-decoration: underline;">this</span>.insertElement.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>), insertedValue);
                <span style="font-weight: bold;">if</span>(k+1&lt;insertedvaluelist.length)
                        document.getElementById(<span style="font-style: italic;">"nextelement"</span>).innerHTML=insertedvaluelist[k+1]
                <span style="font-weight: bold;">else</span>
                        document.getElementById(<span style="font-style: italic;">"nextelement"</span>).innerHTML=<span style="font-style: italic;">"No More Values to insert"</span>
        }
}


</pre>
</div>
</div>
</div>

<div id="outline-container-org7c4aa00" class="outline-3">
<h3 id="org7c4aa00"><span class="section-number-3">1.10</span> Function is called whenever a delete operation is performed on the tree and handles the delete operation.</h3>
<div class="outline-text-3" id="text-1-10">
<p>
+The actual delete operation does not happen in the deleteCallback function as with all the callback functions that we have implemented. 
+Here also, we make a call to the implementAction function which takes in deleteElement function and the value to be deleted as parameters. The deleteElement function then performs the actual delete operation.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org08aeda4">RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.deleteCallback = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">deletedValue</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.deleteField.value;
        <span style="font-weight: bold;">if</span> (deletedValue != <span style="font-style: italic;">""</span>)
        {
                deletedValue = <span style="font-weight: bold; text-decoration: underline;">this</span>.normalizeNumber(deletedValue, 1);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.deleteField.value = <span style="font-style: italic;">""</span>;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.implementAction(<span style="font-weight: bold; text-decoration: underline;">this</span>.deleteElement.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>),deletedValue);               
        }
}

</pre>
</div>
</div>
</div>
<div id="outline-container-org0057455" class="outline-3">
<h3 id="org0057455"><span class="section-number-3">1.11</span> Function called when a find/search operation is performed on the tree.</h3>
<div class="outline-text-3" id="text-1-11">
<p>
+The find callback function is called when we perform a find operation on the red black tree. Like other callback functions that we have defined here the actual find operation does not happen here. 
</p>

<p>
+We make a call to the implementAction function and pass it two parameters, one is the function which performs the actual find and the other is the argument to the function, which is the key we need to find in the tree.
</p>



<div class="org-src-container">
<pre class="src src-js" id="org5121db5">


RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.findCallback = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">findValue</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.findField.value;
        <span style="font-weight: bold;">if</span> (findValue != <span style="font-style: italic;">""</span>)
        {
                findValue = <span style="font-weight: bold; text-decoration: underline;">this</span>.normalizeNumber(findValue, 1);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.findField.value = <span style="font-style: italic;">""</span>;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.implementAction(<span style="font-weight: bold; text-decoration: underline;">this</span>.findElement.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>),findValue);            
        }
}

</pre>
</div>
</div>
</div>


<div id="outline-container-orga8b4d34" class="outline-3">
<h3 id="orga8b4d34"><span class="section-number-3">1.12</span> Function is called when the print functionality of the tree is invoked.</h3>
<div class="outline-text-3" id="text-1-12">
<p>
+This function makes a call to the implementAction function and does not directly implement the print functionality. Like any other callback function which we have defined here, a printTree function is passed as an argument to implementAction. 
</p>

<p>
+This function then performs the actual printing of the nodes. 
</p>

<div class="org-src-container">
<pre class="src src-js" id="org9135bf6">


RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.printCallback = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.implementAction(<span style="font-weight: bold; text-decoration: underline;">this</span>.printTree.bind(<span style="font-weight: bold; text-decoration: underline;">this</span>),<span style="font-style: italic;">""</span>);                                             
}


</pre>
</div>
</div>
</div>


<div id="outline-container-org105a6b6" class="outline-3">
<h3 id="org105a6b6"><span class="section-number-3">1.13</span> Function to display all the Null leaves.</h3>
<div class="outline-text-3" id="text-1-13">
<p>
+This function makes a call to the set All layout, which handles the rendering of null leaves on the screen.
</p>

<p>
+When the user checks the show null leaves check box, the showNullLeaves.checked boolean variable is set to true and the null leaves are rendered. 
</p>

<div class="org-src-container">
<pre class="src src-js" id="orgdbe5717">


RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.showNullLeavesCallback = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.showNullLeaves.checked)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.animationManager.setAllLayers([0,1]);              
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.animationManager.setAllLayers([0]);
        }
}

</pre>
</div>
</div>
</div>
<div id="outline-container-org9c3fe17" class="outline-3">
<h3 id="org9c3fe17"><span class="section-number-3">1.14</span> Function prints the tree nodes, essentially performs a traversal on the tree.</h3>
<div class="outline-text-3" id="text-1-14">
<p>
+This is the function that actually performs the printing of nodes in the tree. 
</p>

<p>
+Since, a tree by definition is a recursive data structure we need to have a recursive function which traverses the tree in a level order and prints the element, printTreeRec is such a recursive function being called from here.
</p>

<div class="org-src-container">
<pre class="src src-js" id="orgcf2e854">RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.printTree = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">unused</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.commands = [];
        
        <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot != <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">firstLabel</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateHighlightCircle"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, HIGHLIGHT_COLOR, <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.x, <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.y);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.xPosOfNextLabel = FIRST_PRINT_POS_X;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.yPosOfNextLabel = <span style="font-weight: bold; text-decoration: underline;">this</span>.first_print_pos_y;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.printTreeRec(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>,<span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                <span style="font-weight: bold;">for</span> (<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">i</span> = firstLabel; i &lt; <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex; i++)
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, i);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex = <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID;  <span style="font-weight: bold; font-style: italic;">/// </span><span style="font-weight: bold; font-style: italic;">Reuse objects.  Not necessary.</span>
        }
        <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">this</span>.commands;
}

</pre>
</div>
</div>
</div>



<div id="outline-container-org7641636" class="outline-3">
<h3 id="org7641636"><span class="section-number-3">1.15</span> Function prints the tree in a recursive order.</h3>
<div class="outline-text-3" id="text-1-15">
<p>
+The tree by definition is a recursive data structure. The print operation given here prints the tree in a recursive order. The function starts from the root of the tree and print all the keys in the root, and then recursively the keys in left subtree and right subtree.
</p>

<p>
+The function then moves on to the next next level starting from the left most child of the root. 
</p>
<div class="org-src-container">
<pre class="src src-js" id="org1ca792f">
RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.printTreeRec = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>) 
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
        <span style="font-weight: bold;">if</span> (tree.left != <span style="font-weight: bold; text-decoration: underline;">null</span> &amp;&amp; !tree.left.phantomLeaf)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, tree.left.x, tree.left.y);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.printTreeRec(tree.left);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, tree.x, tree.y);                             
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
        }
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">nextLabelID</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateLabel"</span>, nextLabelID, tree.data, tree.x, tree.y);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, nextLabelID, PRINT_COLOR);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, nextLabelID, <span style="font-weight: bold; text-decoration: underline;">this</span>.xPosOfNextLabel, <span style="font-weight: bold; text-decoration: underline;">this</span>.yPosOfNextLabel);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.xPosOfNextLabel +=  PRINT_HORIZONTAL_GAP;
        <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.xPosOfNextLabel &gt; <span style="font-weight: bold; text-decoration: underline;">this</span>.print_max)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.xPosOfNextLabel = FIRST_PRINT_POS_X;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.yPosOfNextLabel += PRINT_VERTICAL_GAP;
                
        }
        <span style="font-weight: bold;">if</span> (tree.right != <span style="font-weight: bold; text-decoration: underline;">null</span> &amp;&amp; !tree.right.phantomLeaf)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, tree.right.x, tree.right.y);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.printTreeRec(tree.right);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, tree.x, tree.y);     
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
        }
        <span style="font-weight: bold;">return</span>;
}


</pre>
</div>
</div>
</div>
<div id="outline-container-org3d33ad2" class="outline-3">
<h3 id="org3d33ad2"><span class="section-number-3">1.16</span> Function performs the find functionality on the tree, receives the element to be searched in the arguments.</h3>
<div class="outline-text-3" id="text-1-16">
<p>
+This is the function that actually performs the find operation in the tree. Since a tree is a recursive data structure, we need to recursively traverse the tree in order to find any key in it. 
</p>

<div class="org-src-container">
<pre class="src src-js" id="org58bf047">
RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.findElement = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">findValue</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.commands = [];
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.doFind(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot, findValue);
        
        
        <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">this</span>.commands;
}


RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.doFind = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>, <span style="font-weight: bold; font-style: italic;">value</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Searchiing for "</span>+value);
        <span style="font-weight: bold;">if</span> (tree != <span style="font-weight: bold; text-decoration: underline;">null</span> &amp;&amp; !tree.phantomLeaf)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 1);
                <span style="font-weight: bold;">if</span> (tree.data == value)
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Searching for "</span>+value+<span style="font-style: italic;">" : "</span> + value + <span style="font-style: italic;">" = "</span> + value + <span style="font-style: italic;">" (Element found!)"</span>);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Found:"</span>+value);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                }
                <span style="font-weight: bold;">else</span>
                {
                        <span style="font-weight: bold;">if</span> (tree.data &gt; value)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Searching for "</span>+value+<span style="font-style: italic;">" : "</span> + value + <span style="font-style: italic;">" &lt; "</span> + tree.data + <span style="font-style: italic;">" (look to left subtree)"</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                                <span style="font-weight: bold;">if</span> (tree.left!= <span style="font-weight: bold; text-decoration: underline;">null</span>)
                                {
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateHighlightCircle"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, HIGHLIGHT_COLOR, tree.x, tree.y);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, tree.left.x, tree.left.y);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID);
                                }
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.doFind(tree.left, value);
                        }
                        <span style="font-weight: bold;">else</span>
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">" Searching for "</span>+value+<span style="font-style: italic;">" : "</span> + value + <span style="font-style: italic;">" &gt; "</span> + tree.data + <span style="font-style: italic;">" (look to right subtree)"</span>);                                 
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                                <span style="font-weight: bold;">if</span> (tree.right!= <span style="font-weight: bold; text-decoration: underline;">null</span>)
                                {
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateHighlightCircle"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, HIGHLIGHT_COLOR, tree.x, tree.y);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, tree.right.x, tree.right.y);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID);                           
                                }
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.doFind(tree.right, value);                                         
                        }
                        
                }
                
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">" Searching for "</span>+value+<span style="font-style: italic;">" : "</span> + <span style="font-style: italic;">"&lt; Empty Tree &gt; (Element not found)"</span>);                           
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);                                       
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">" Searching for "</span>+value+<span style="font-style: italic;">" : "</span> + <span style="font-style: italic;">" (Element not found)"</span>);                                 
        }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org37a120d" class="outline-3">
<h3 id="org37a120d"><span class="section-number-3">1.17</span> Function to determine the uncle node</h3>
<div class="outline-text-3" id="text-1-17">
<p>
+The uncle node is the sibling of the parent node of the concered node.
+If the parent is null, we return null
+Also left child of grandparent node is the sibling node of the parent of the concerned node,if the concerned node is in right subtree.
+Also right child of grandparent node is the sibling node of the parent of the concerned node,if the concerned node is in left subtree.
</p>


<div class="org-src-container">
<pre class="src src-js" id="org991590f">
RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.findUncle = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>)
{
        <span style="font-weight: bold;">if</span> (tree.parent == <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">null</span>;
        }
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">par</span>  = tree.parent;
        <span style="font-weight: bold;">if</span> (par.parent == <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">null</span>;
        }
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">grandPar</span>   = par.parent;
        
        <span style="font-weight: bold;">if</span> (grandPar.left == par)
        {
                <span style="font-weight: bold;">return</span> grandPar.right;
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold;">return</span> grandPar.left;
        }                               
}

</pre>
</div>
</div>
</div>

<div id="outline-container-org3e87c6c" class="outline-3">
<h3 id="org3e87c6c"><span class="section-number-3">1.18</span> Function to return the black level</h3>
<div class="outline-text-3" id="text-1-18">
<ul class="org-ul">
<li>used internally while deletion process is going on for checking violation of black level.</li>
</ul>

<div class="org-src-container">
<pre class="src src-js" id="org3407fd6">



RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.blackLevel = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>)
{
        <span style="font-weight: bold;">if</span> (tree == <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold;">return</span> 1;
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold;">return</span> tree.blackLevel;
        }
}

</pre>
</div>
</div>
</div>




<div id="outline-container-org008bf34" class="outline-3">
<h3 id="org008bf34"><span class="section-number-3">1.19</span> Function to attach null leaves to a node</h3>
<div class="outline-text-3" id="text-1-19">
<p>
+The attach null leaves internally calls both attachleftnulleaf and attachrightnulleaf.
+Each of the functions initiliazes a new red black node with background and foreground set to black color. 
</p>


<div class="org-src-container">
<pre class="src src-js" id="org2877660">
RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.attachLeftNullLeaf = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">node</span>)
{

        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">treeNodeID</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateCircle"</span>, treeNodeID, <span style="font-style: italic;">"NULL\nLEAF"</span>,  node.x, node.y);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, treeNodeID, FOREGROUND_BLACK);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>, treeNodeID, BACKGROUND_BLACK);
        node.left = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">RedBlackNode</span>(<span style="font-style: italic;">""</span>, treeNodeID, <span style="font-weight: bold; text-decoration: underline;">this</span>.startingX, startingY);
        node.left.phantomLeaf = <span style="font-weight: bold; text-decoration: underline;">true</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetLayer"</span>, treeNodeID, 1);
        node.left.blackLevel = 1;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>,node.graphicID, treeNodeID, LINK_COLOR);
}       

RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.attachRightNullLeaf = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">node</span>)
{

        treeNodeID = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateCircle"</span>, treeNodeID, <span style="font-style: italic;">"NULL\nLEAF"</span>,  node.x, node.y);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, treeNodeID, FOREGROUND_BLACK);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>, treeNodeID, BACKGROUND_BLACK);
        node.right = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">RedBlackNode</span>(<span style="font-style: italic;">""</span>, treeNodeID, <span style="font-weight: bold; text-decoration: underline;">this</span>.startingX, startingY);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetLayer"</span>, treeNodeID, 1);
        
        node.right.phantomLeaf = <span style="font-weight: bold; text-decoration: underline;">true</span>;
        node.right.blackLevel = 1;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, node.graphicID, treeNodeID, LINK_COLOR);
        
}
RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.attachNullLeaves = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">node</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.attachLeftNullLeaf(node);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.attachRightNullLeaf(node);
}

</pre>
</div>
</div>
</div>





<div id="outline-container-org80c125c" class="outline-3">
<h3 id="org80c125c"><span class="section-number-3">1.20</span> Wrapper Function to insert node into a red black tree</h3>
<div class="outline-text-3" id="text-1-20">
<p>
+If the root node is null, a new circle object is created, and colored in black as per the algorithm.
+Null leaves are attached to the created node by calling the attachNullLeaves function declared above.
+If the root is not null, the new node is  created and internally the insert() function is called, which handles which subtree to insert the element in.
</p>



<div class="org-src-container">
<pre class="src src-js" id="org990bcb6">





RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.insertElement = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">insertedValue</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.commands = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">Array</span>();    
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">" Inserting "</span>+insertedValue);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">treeNodeID</span>;
        <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot == <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                treeNodeID = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateCircle"</span>, treeNodeID, insertedValue,  <span style="font-weight: bold; text-decoration: underline;">this</span>.startingX, startingY);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, treeNodeID, FOREGROUND_BLACK);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>, treeNodeID, BACKGROUND_BLACK);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">RedBlackNode</span>(insertedValue, treeNodeID, <span style="font-weight: bold; text-decoration: underline;">this</span>.startingX, startingY);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.blackLevel = 1;
                
                <span style="font-weight: bold; text-decoration: underline;">this</span>.attachNullLeaves(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                
        }
        <span style="font-weight: bold;">else</span>
        {
                treeNodeID = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
                
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateCircle"</span>, treeNodeID, insertedValue, 30, startingY);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, treeNodeID, FOREGROUND_RED);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>, treeNodeID, BACKGROUND_RED);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);                               
                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">insertElem</span> = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">RedBlackNode</span>(insertedValue, treeNodeID, 100, 100)
                
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, insertElem.graphicID, 1);
                insertElem.height = 1;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.insert(insertElem, <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot);
                        
        }
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">" "</span>);                            
        <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">this</span>.commands;
}
</pre>
</div>
</div>
</div>




<div id="outline-container-org7ef27e0" class="outline-3">
<h3 id="org7ef27e0"><span class="section-number-3">1.21</span> Function to handle single rotation of the tree</h3>
<div class="outline-text-3" id="text-1-21">
<p>
+singleRotateRight Handles the right rotation and singleRotateLeft handles the left rotation.
+For right rotation,the right subtree is moved to the left subtree.
+The values of left subtree are stored in t1,t2.
+If the right subtree of left subtree,t2 is not null, the root node passed is made as the parent of this subtree.
</p>

<p>
+Similary for left rotation,
If the left subtree of right subtree,t2 is not null, the root node passed is made as the parent of this subtree.
</p>


<div class="org-src-container">
<pre class="src src-js" id="org47eb1f9">RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.singleRotateRight = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>)
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">B</span> = tree;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">t3</span> = B.right;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">A</span> = tree.left;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">t1</span> = A.left;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">t2</span> = A.right;
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Single Rotate Right"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetEdgeHighlight"</span>, B.graphicID, A.graphicID, 1);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
        

        
        <span style="font-weight: bold;">if</span> (t2 != <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, A.graphicID, t2.graphicID); 
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, B.graphicID, t2.graphicID, LINK_COLOR);
                t2.parent = B;
        }
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, B.graphicID, A.graphicID);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, A.graphicID, B.graphicID, LINK_COLOR);
        
        A.parent = B.parent;
        <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot == B)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot = A;
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, B.parent.graphicID, B.graphicID, LINK_COLOR);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, B.parent.graphicID, A.graphicID, LINK_COLOR)
                <span style="font-weight: bold;">if</span> (B.isLeftChild())
                {
                        B.parent.left = A;
                }
                <span style="font-weight: bold;">else</span>
                {
                        B.parent.right = A;
                }
        }
        A.right = B;
        B.parent = A;
        B.left = t2;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.resetHeight(B);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.resetHeight(A);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();                      
        <span style="font-weight: bold;">return</span> A;
}



RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.singleRotateLeft = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>) 
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">A</span> = tree;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">B</span> = tree.right;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">t1</span> = A.left;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">t2</span> = B.left;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">t3</span> = B.right;
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Single Rotate Left"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetEdgeHighlight"</span>, A.graphicID, B.graphicID, 1);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
        
        <span style="font-weight: bold;">if</span> (t2 != <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, B.graphicID, t2.graphicID);                                                                                                                                                
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, A.graphicID, t2.graphicID, LINK_COLOR);
                t2.parent = A;
        }
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, A.graphicID, B.graphicID);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, B.graphicID, A.graphicID, LINK_COLOR);
        B.parent = A.parent;
        <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot == A)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot = B;
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, A.parent.graphicID, A.graphicID, LINK_COLOR);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, A.parent.graphicID, B.graphicID, LINK_COLOR)
                
                <span style="font-weight: bold;">if</span> (A.isLeftChild())
                {
                        A.parent.left = B;
                }
                <span style="font-weight: bold;">else</span>
                {
                        A.parent.right = B;
                }
        }
        B.left = A;
        A.parent = B;
        A.right = t2;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.resetHeight(A);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.resetHeight(B);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
        <span style="font-weight: bold;">return</span> B;
}



</pre>
</div>
</div>
</div>



<div id="outline-container-org30f8a53" class="outline-3">
<h3 id="org30f8a53"><span class="section-number-3">1.22</span> Function to return height and reset height</h3>
<div class="outline-text-3" id="text-1-22">
<p>
+getHeight is a getter function for getting the height of the red black tree.
+resetHeight resets the height of tree ,if the structure of tree has changed after performing a rotate operation above.
</p>



<div class="org-src-container">
<pre class="src src-js" id="orgfa56971">

RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.getHeight = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>) 
{
        <span style="font-weight: bold;">if</span> (tree == <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold;">return</span> 0;
        }
        <span style="font-weight: bold;">return</span> tree.height;
}

RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.resetHeight = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>)
{
        <span style="font-weight: bold;">if</span> (tree != <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">newHeight</span> = Math.max(<span style="font-weight: bold; text-decoration: underline;">this</span>.getHeight(tree.left), <span style="font-weight: bold; text-decoration: underline;">this</span>.getHeight(tree.right)) + 1;
                <span style="font-weight: bold;">if</span> (tree.height != newHeight)
                {
                        tree.height = Math.max(<span style="font-weight: bold; text-decoration: underline;">this</span>.getHeight(tree.left), <span style="font-weight: bold; text-decoration: underline;">this</span>.getHeight(tree.right)) + 1
                }
        }
}


</pre>
</div>
</div>
</div>


<div id="outline-container-org22e84fc" class="outline-3">
<h3 id="org22e84fc"><span class="section-number-3">1.23</span> Function to implement the actual insert algorithm of the red black tree.</h3>
<div class="outline-text-3" id="text-1-23">
<p>
+The insert function is called by the insertWrapper function when the tree root is not null.
</p>

<ul class="org-ul">
<li>If the the value of the node is greater than the root node, the the node is inserted in the right subtree.</li>
</ul>
<p>
+If the value of the node is less than the root node , the node is inserted in the left subtree.
</p>

<ul class="org-ul">
<li>If the left subtree is not null, it is recursively called till a single null lead, also called as phatom leaf found and then the node is inserted.</li>
</ul>


<ul class="org-ul">
<li>Similarly,If the right subtree is not null, it is recursively called till a single null lead, also called as phatom leaf found and then the node is inserted.</li>
</ul>

<div class="org-src-container">
<pre class="src src-js" id="orgace2a43">


RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.insert = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">elem</span>, <span style="font-weight: bold; font-style: italic;">tree</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 1);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, elem.graphicID, 1);
        
        <span style="font-weight: bold;">if</span> (elem.data &lt; tree.data)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, elem.data + <span style="font-style: italic;">" &lt; "</span> + tree.data + <span style="font-style: italic;">".  Looking at left subtree"</span>);                           
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>,  0, elem.data + <span style="font-style: italic;">" &gt;= "</span> + tree.data + <span style="font-style: italic;">".  Looking at right subtree"</span>);                                
        }
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID , 0);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, elem.graphicID, 0);
        
        <span style="font-weight: bold;">if</span> (elem.data &lt; tree.data)
        {
                <span style="font-weight: bold;">if</span> (tree.left == <span style="font-weight: bold; text-decoration: underline;">null</span> || tree.left.phantomLeaf)
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Found null tree (or phantom leaf), inserting element"</span>);                         
                        <span style="font-weight: bold;">if</span> (tree.left != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tree.left.graphicID);
                        }
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, elem.graphicID, 0);
                        tree.left=elem;
                        elem.parent = tree;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, tree.graphicID, elem.graphicID, LINK_COLOR);
                        
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.attachNullLeaves(elem);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                        
                        
                        
                        
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                        
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixDoubleRed(elem);
                        
                }
                <span style="font-weight: bold;">else</span>
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateHighlightCircle"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, HIGHLIGHT_COLOR, tree.x, tree.y);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, tree.left.x, tree.left.y);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.insert(elem, tree.left);
                        
                }
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold;">if</span> (tree.right == <span style="font-weight: bold; text-decoration: underline;">null</span>  || tree.right.phantomLeaf)
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>,  0, <span style="font-style: italic;">"Found null tree (or phantom leaf), inserting element"</span>);
                        <span style="font-weight: bold;">if</span> (tree.right != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tree.right.graphicID);
                        }
                        
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, elem.graphicID, 0);
                        tree.right=elem;
                        elem.parent = tree;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, tree.graphicID, elem.graphicID, LINK_COLOR);
                        elem.x = tree.x + widthDelta/2;
                        elem.y = tree.y + heightDelta
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, elem.graphicID, elem.x, elem.y);
                        
                        
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.attachNullLeaves(elem);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                        
                        
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixDoubleRed(elem);
                }
                <span style="font-weight: bold;">else</span>
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateHighlightCircle"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, HIGHLIGHT_COLOR, tree.x, tree.y);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, tree.right.x, tree.right.y);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.insert(elem, tree.right);
                }
        }
        
        
}


</pre>
</div>
</div>
</div>
<div id="outline-container-org11f88dd" class="outline-3">
<h3 id="org11f88dd"><span class="section-number-3">1.24</span> Function to fix double red case in red black tree.</h3>
<div class="outline-text-3" id="text-1-24">
<ul class="org-ul">
<li>This function is used in some intricate cases arising in insert and deletion operations.</li>
<li>If the root is red, we color is black.</li>
<li>When the node and parent are red,uncle of node is red, we push blackness from grandparent, by setting the black level variable of the uncle to 1, parent to 1,grandparent to 0 and recursively calling the function on the grandparent, as the violation has now been shifted upwards.</li>
<li>If node,parent are both red  Node is right child, parent is left child, then singlerotateleft function is called.</li>

<li>If node,parent are both red  Node is left child, parent is right child, then singlerotateright function is called.</li>
</ul>


<div class="org-src-container">
<pre class="src src-js" id="org48b5111">


RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.fixDoubleRed = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>)
{
        <span style="font-weight: bold;">if</span> (tree.parent != <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold;">if</span> (tree.parent.blackLevel &gt; 0)
                {
                        <span style="font-weight: bold;">return</span>;
                }
                <span style="font-weight: bold;">if</span> (tree.parent.parent == <span style="font-weight: bold; text-decoration: underline;">null</span>)
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Tree root is red, color it black."</span>);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                        tree.parent.blackLevel = 1;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, tree.parent.graphicID, FOREGROUND_BLACK);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>, tree.parent.graphicID, BACKGROUND_BLACK);
                        <span style="font-weight: bold;">return</span>;
                }
                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">uncle</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.findUncle(tree);
                <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.blackLevel(uncle) == 0)
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Node and parent are both red.  Uncle of node is red -- push blackness down from grandparent"</span>);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                        
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, uncle.graphicID, FOREGROUND_BLACK);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>,uncle.graphicID, BACKGROUND_BLACK);
                        uncle.blackLevel = 1;
                        
                        tree.parent.blackLevel = 1;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, tree.parent.graphicID, FOREGROUND_BLACK);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>,tree.parent.graphicID, BACKGROUND_BLACK);
                        
                        tree.parent.parent.blackLevel = 0;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, tree.parent.parent.graphicID, FOREGROUND_RED);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>,tree.parent.parent.graphicID, BACKGROUND_RED);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixDoubleRed(tree.parent.parent);
                }
                <span style="font-weight: bold;">else</span>
                {
                        <span style="font-weight: bold;">if</span> (tree.isLeftChild() &amp;&amp;  !tree.parent.isLeftChild())
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Node and parent are both red.  Node is left child, parent is right child -- rotate"</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.singleRotateRight(tree.parent);
                                tree=tree.right;
                                
                        }
                        <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (!tree.isLeftChild() &amp;&amp; tree.parent.isLeftChild())
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Node and parent are both red.  Node is right child, parent is left child -- rotate"</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.singleRotateLeft(tree.parent);
                                tree=tree.left;
                        }
                        
                        <span style="font-weight: bold;">if</span> (tree.isLeftChild())
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Node and parent are both red.  Node is left child, parent is left child\nCan fix extra redness with a single rotation"</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.singleRotateRight(tree.parent.parent);
                                tree.parent.blackLevel = 1;
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, tree.parent.graphicID, FOREGROUND_BLACK);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>,tree.parent.graphicID, BACKGROUND_BLACK);
                                
                                tree.parent.right.blackLevel = 0;
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, tree.parent.right.graphicID, FOREGROUND_RED);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>,tree.parent.right.graphicID, BACKGROUND_RED);                                             
                                
                                
                        }
                        <span style="font-weight: bold;">else</span>
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Node and parent are both red.  Node is right child, parent is right child\nCan fix extra redness with a single rotation"</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.singleRotateLeft(tree.parent.parent);
                                tree.parent.blackLevel = 1;
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, tree.parent.graphicID, FOREGROUND_BLACK);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>,tree.parent.graphicID, BACKGROUND_BLACK);
                                
                                tree.parent.left.blackLevel = 0;
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, tree.parent.left.graphicID, FOREGROUND_RED);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>,tree.parent.left.graphicID, BACKGROUND_RED);                              
                                
                        }                                       
                }
                
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold;">if</span> (tree.blackLevel == 0)
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Root of the tree is red.  Color it black"</span>);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                        
                        tree.blackLevel = 1;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, tree.graphicID, FOREGROUND_BLACK);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>, tree.graphicID, BACKGROUND_BLACK);
                }
        }
        
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org12502c5" class="outline-3">
<h3 id="org12502c5"><span class="section-number-3">1.25</span> Wrapper function for delete operation.</h3>
<div class="outline-text-3" id="text-1-25">
<ul class="org-ul">
<li>The function internally calls treeDelete, which handles the intricate cases of deletion algorithm</li>
</ul>
<div class="org-src-container">
<pre class="src src-js" id="org701e646">

RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.deleteElement = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">deletedValue</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.commands = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">Array</span>();
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Deleting "</span>+deletedValue);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">" "</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.treeDelete(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot, deletedValue);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">" "</span>);                    
        <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">Do delete</span>
        <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">this</span>.commands;                                           
}

</pre>
</div>
</div>
</div>
<div id="outline-container-org69e81af" class="outline-3">
<h3 id="org69e81af"><span class="section-number-3">1.26</span> Fixing Null leaves</h3>
<div class="outline-text-3" id="text-1-26">
<ul class="org-ul">
<li>The function is called, when the node deleted is a black node, and to retain the black depth we convert the node to double black node.</li>
<li>The function fixLeftNull, convert the left subtree to double black node.</li>
<li>The function fixRightNull, converts the right subtee to double black node.</li>
</ul>


<div class="org-src-container">
<pre class="src src-js" id="org7e40670">

RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.fixLeftNull = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>)
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">treeNodeID</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">nullLeaf</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Coloring 'Null Leaf' double black"</span>);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateCircle"</span>, treeNodeID, <span style="font-style: italic;">"NULL\nLEAF"</span>,  tree.x, tree.y);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, treeNodeID, FOREGROUND_BLACK);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>, treeNodeID, BACKGROUND_DOUBLE_BLACK);
        nullLeaf = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">RedBlackNode</span>(<span style="font-style: italic;">"NULL\nLEAF"</span>, treeNodeID, tree.x, tree.x);
        nullLeaf.blackLevel = 2;
        nullLeaf.parent = tree;
        nullLeaf.phantomLeaf = <span style="font-weight: bold; text-decoration: underline;">true</span>;
        tree.left = nullLeaf;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, tree.graphicID, nullLeaf.graphicID, LINK_COLOR);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();                              
        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixExtraBlackChild(tree, <span style="font-weight: bold; text-decoration: underline;">true</span>);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetLayer"</span>, nullLeaf.graphicID, 1);
        nullLeaf.blackLevel = 1;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(nullLeaf);
}


RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.fixRightNull = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>)
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">treeNodeID</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex++;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">nullLeaf</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Coloring 'Null Leaf' double black"</span>);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateCircle"</span>, treeNodeID, <span style="font-style: italic;">"NULL\nLEAF"</span>,  tree.x, tree.y);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, treeNodeID, FOREGROUND_BLACK);
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>, treeNodeID, BACKGROUND_DOUBLE_BLACK);
        nullLeaf = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">RedBlackNode</span>(<span style="font-style: italic;">"NULL\nLEAF"</span>, treeNodeID, tree.x, tree.x);
        nullLeaf.parent = tree;
        nullLeaf.phantomLeaf = <span style="font-weight: bold; text-decoration: underline;">true</span>;
        nullLeaf.blackLevel = 2;
        tree.right = nullLeaf;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, tree.graphicID, nullLeaf.graphicID, LINK_COLOR);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();                              
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixExtraBlackChild(tree, <span style="font-weight: bold; text-decoration: underline;">false</span>);
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetLayer"</span>, nullLeaf.graphicID, 1);
        nullLeaf.blackLevel = 1;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(nullLeaf);
        
}
</pre>
</div>
</div>
</div>


<div id="outline-container-orgc649af7" class="outline-3">
<h3 id="orgc649af7"><span class="section-number-3">1.27</span> Function to fix extra black node.</h3>
<div class="outline-text-3" id="text-1-27">
<ul class="org-ul">
<li>The black level of the node is checked.</li>

<li>If the node is double black node and  has black sibling and 2 black nephews, then we push up the black level, making the subling black level to 0,the parent node black level to 2 and pushing the double black to parent node.</li>
</ul>
<p>
+The function is then recusrively called on the double  black parent node.
</p>


<div class="org-src-container">
<pre class="src src-js" id="org5f07dd8">
RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.fixExtraBlackChild = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">parNode</span>, <span style="font-weight: bold; font-style: italic;">isLeftChild</span>)
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">sibling</span>;
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">doubleBlackNode</span>;
        <span style="font-weight: bold;">if</span> (isLeftChild)
        {
                sibling = parNode.right;
                doubleBlackNode = parNode.left;
        }
        <span style="font-weight: bold;">else</span>
        {
                sibling = parNode.left;                         
                doubleBlackNode = parNode.right;
        }
        <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.blackLevel(sibling) &gt; 0 &amp;&amp; <span style="font-weight: bold; text-decoration: underline;">this</span>.blackLevel(sibling.left) &gt; 0 &amp;&amp; <span style="font-weight: bold; text-decoration: underline;">this</span>.blackLevel(sibling.right) &gt; 0)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Double black node has black sibling and 2 black nephews.  Push up black level"</span>);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                sibling.blackLevel = 0;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(sibling);
                <span style="font-weight: bold;">if</span> (doubleBlackNode != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                {
                        doubleBlackNode.blackLevel = 1;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(doubleBlackNode);
                        
                }
                <span style="font-weight: bold;">if</span> (parNode.blackLevel == 0)
                {
                        parNode.blackLevel = 1;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(parNode);
                }
                <span style="font-weight: bold;">else</span>
                {
                        parNode.blackLevel = 2;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(parNode);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Pushing up black level created another double black node.  Repeating ..."</span>);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixExtraBlack(parNode);
                }                               
        }
        <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.blackLevel(sibling) == 0)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Double black node has red sibling.  Rotate tree to make sibling black ..."</span>);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                <span style="font-weight: bold;">if</span> (isLeftChild)
                {
                        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">newPar</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.singleRotateLeft(parNode);
                        newPar.blackLevel = 1;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(newPar);
                        newPar.left.blackLevel = 0;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(newPar.left);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>); <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">TODO:  REMOVE</span>
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixExtraBlack(newPar.left.left);
                        
                }
                <span style="font-weight: bold;">else</span>
                {
                        newPar  = <span style="font-weight: bold; text-decoration: underline;">this</span>.singleRotateRight(parNode);
                        newPar.blackLevel = 1;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(newPar);
                        newPar.right.blackLevel = 0;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(newPar.right);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>); <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">TODO:  REMOVE</span>

                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixExtraBlack(newPar.right.right);
                }
        }
</pre>
</div>
<ul class="org-ul">
<li>If the double black node has black sibling, but double black node is a left child, and the right nephew is black, the tree is rotate to make oppposite nephew red.</li>
</ul>
<p>
+The blacklevel of opposite nephew is set to 0, the function is recursvely called on the parent node.
</p>

<ul class="org-ul">
<li>If the double black node has black sibling, but double black node is a right child, and the leftt nephew is black, the tree is rotate to make opposite nephew red.</li>
</ul>
<p>
+The blacklevel of opposite nephew is set to 0, the function is recursvely called on the parent node.
</p>



<div class="org-src-container">
<pre class="src src-js" id="org895811d">        <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (isLeftChild &amp;&amp; <span style="font-weight: bold; text-decoration: underline;">this</span>.blackLevel(sibling.right) &gt; 0)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Double black node has black sibling, but double black node is a left child, \nand the right nephew is black.  Rotate tree to make opposite nephew red ..."</span>);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                
                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">newSib</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.singleRotateRight(sibling);
                newSib.blackLevel = 1;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(newSib);
                newSib.right.blackLevel = 0;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(newSib.right);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.fixExtraBlackChild(parNode, isLeftChild);
        }
        <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (!isLeftChild &amp;&amp; <span style="font-weight: bold; text-decoration: underline;">this</span>.blackLevel(sibling.left) &gt; 0)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Double black node has black sibling, but double black node is a right child, \nand the left nephew is black.  Rotate tree to make opposite nephew red ..."</span>);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                newSib = <span style="font-weight: bold; text-decoration: underline;">this</span>.singleRotateLeft(sibling);
                newSib.blackLevel = 1;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(newSib);
                newSib.left.blackLevel = 0;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(newSib.left);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.fixExtraBlackChild(parNode, isLeftChild);
        }
        <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (isLeftChild)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Double black node has black sibling, is a left child, and its right nephew is red.\nOne rotation can fix double-blackness."</span>);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                
                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">oldParBlackLevel</span>  = parNode.blackLevel;
                newPar = <span style="font-weight: bold; text-decoration: underline;">this</span>.singleRotateLeft(parNode);
                <span style="font-weight: bold;">if</span> (oldParBlackLevel == 0)
                {
                        newPar.blackLevel = 0;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(newPar);
                        newPar.left.blackLevel = 1;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(newPar.left);
                }
                newPar.right.blackLevel = 1;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(newPar.right);
                <span style="font-weight: bold;">if</span> (newPar.left.left != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                {
                        newPar.left.left.blackLevel = 1;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(newPar.left.left);
                }
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Double black node has black sibling, is a right child, and its left nephew is red.\nOne rotation can fix double-blackness."</span>);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                
                oldParBlackLevel  = parNode.blackLevel;
                newPar = <span style="font-weight: bold; text-decoration: underline;">this</span>.singleRotateRight(parNode);
                <span style="font-weight: bold;">if</span> (oldParBlackLevel == 0)
                {
                        newPar.blackLevel = 0;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(newPar);
                        newPar.right.blackLevel = 1;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(newPar.right);
                }
                newPar.left.blackLevel = 1;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(newPar.left);
                <span style="font-weight: bold;">if</span> (newPar.right.right != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                {
                        newPar.right.right.blackLevel = 1;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(newPar.right.right);
                }
        }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org982024d" class="outline-3">
<h3 id="org982024d"><span class="section-number-3">1.28</span> Fixing double black nodes</h3>
<div class="outline-text-3" id="text-1-28">
<ul class="org-ul">
<li>The black node level is checked.</li>
<li>If the node is double black and is root, we simply make it single black by setting the black level to 1.</li>
<li>For other cases, we called the fix extra black child function.</li>
</ul>


<div class="org-src-container">
<pre class="src src-js" id="org6fb0f74"> 

RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.fixExtraBlack = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>)
{
        <span style="font-weight: bold;">if</span> (tree.blackLevel &gt; 1)
        {
                <span style="font-weight: bold;">if</span> (tree.parent == <span style="font-weight: bold; text-decoration: underline;">null</span>)
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Double black node is root.  Make it single black."</span>);
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                        
                        tree.blackLevel = 1;
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>, tree.graphicID, BACKGROUND_BLACK);
                }
                <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (tree.parent.left == tree)
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixExtraBlackChild(tree.parent, <span style="font-weight: bold; text-decoration: underline;">true</span>);
                }
                <span style="font-weight: bold;">else</span>
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixExtraBlackChild(tree.parent, <span style="font-weight: bold; text-decoration: underline;">false</span>);                                    
                }
                
        }
        <span style="font-weight: bold;">else</span> 
        {
                <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">No extra blackness</span>
        }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org9d8e9c3" class="outline-3">
<h3 id="org9d8e9c3"><span class="section-number-3">1.29</span> Deletion Algorithm</h3>
<div class="outline-text-3" id="text-1-29">
<ul class="org-ul">
<li>The deletion algorithm takes, the root node of the tree and the value to be deleted as parameters.</li>
</ul>
<p>
+The valueToDelete is compared with the data of the root node and then decided which subtree contains the value to be deleted.
</p>
<ul class="org-ul">
<li>If the valueToDelete is less than data of the root node, the left subtree is searched, else the right subtree.</li>
</ul>
<p>
+This function is called recursively till we get the the node to be deleted. if it is not found we reach a phatomLeaf and return.
</p>



<div class="org-src-container">
<pre class="src src-js" id="org87f4150">







RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.treeDelete = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>, <span style="font-weight: bold; font-style: italic;">valueToDelete</span>)
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">leftchild</span> = <span style="font-weight: bold; text-decoration: underline;">false</span>;
        <span style="font-weight: bold;">if</span> (tree != <span style="font-weight: bold; text-decoration: underline;">null</span> &amp;&amp; !tree.phantomLeaf)
        {
                <span style="font-weight: bold;">if</span> (tree.parent != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                {
                        leftchild = tree.parent.left == tree;
                }
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 1);
                <span style="font-weight: bold;">if</span> (valueToDelete &lt; tree.data)
                {       
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, valueToDelete + <span style="font-style: italic;">" &lt; "</span> + tree.data + <span style="font-style: italic;">".  Looking at left subtree"</span>);                               
                }
                <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (valueToDelete &gt; tree.data)
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, valueToDelete + <span style="font-style: italic;">" &gt; "</span> + tree.data + <span style="font-style: italic;">".  Looking at right subtree"</span>);                              
                }
                <span style="font-weight: bold;">else</span>
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, valueToDelete + <span style="font-style: italic;">" == "</span> + tree.data + <span style="font-style: italic;">".  Found node to delete"</span>);                                                                 
                }
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                



</pre>
</div>


<ul class="org-ul">
<li>If the value to be deleted is found, we now check if the black level needs a fix or not.</li>
<li>If the left and right child are null, the command is sent to delete the particular node, and then check if the deletion violates any black level property.</li>
</ul>

<div class="org-src-container">
<pre class="src src-js" id="org09001df">


                <span style="font-weight: bold;">if</span> (valueToDelete == tree.data)
                {
                        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">needFix</span> = tree.blackLevel &gt; 0;
                        <span style="font-weight: bold;">if</span> (((tree.left == <span style="font-weight: bold; text-decoration: underline;">null</span>) || tree.left.phantomLeaf)  &amp;&amp; ((tree.right == <span style="font-weight: bold; text-decoration: underline;">null</span>) || tree.right.phantomLeaf))
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>,  0, <span style="font-style: italic;">"Node to delete is a leaf.  Delete it."</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tree.graphicID);
                                
                                <span style="font-weight: bold;">if</span> (tree.left != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                                {
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tree.left.graphicID);
                                }
                                <span style="font-weight: bold;">if</span> (tree.right != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                                {
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tree.right.graphicID);
                                }
                                
                                
                                <span style="font-weight: bold;">if</span> (leftchild &amp;&amp; tree.parent != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                                {
                                        tree.parent.left = <span style="font-weight: bold; text-decoration: underline;">null</span>;
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();                              
                                        
                                        <span style="font-weight: bold;">if</span> (needFix)
                                        {
                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.fixLeftNull(tree.parent);
                                        }
                                        <span style="font-weight: bold;">else</span>
                                        {
                                                
                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.attachLeftNullLeaf(tree.parent);
                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                                        }
                                }
                                <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (tree.parent != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                                {
                                        tree.parent.right = <span style="font-weight: bold; text-decoration: underline;">null</span>;
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();              
                                        <span style="font-weight: bold;">if</span> (needFix)
                                        {
                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.fixRightNull(tree.parent);
                                        }
                                        <span style="font-weight: bold;">else</span>
                                        {
                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.attachRightNullLeaf(tree.parent);
                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                                        }
                                }
                                <span style="font-weight: bold;">else</span>
                                {
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot = <span style="font-weight: bold; text-decoration: underline;">null</span>;
                                }
                                
                        }

</pre>
</div>

<ul class="org-ul">
<li>If the value to be deleted is found, we now check if the black level needs a fix or not.</li>
<li>If ony the left subtree is null, the parent of deleted node is set to right child of deleted node.</li>
</ul>

<div class="org-src-container">
<pre class="src src-js" id="orgf0d980c">

                        <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (tree.left == <span style="font-weight: bold; text-decoration: underline;">null</span> || tree.left.phantomLeaf)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Node to delete has no left child.  \nSet parent of deleted node to right child of deleted node."</span>);                                                                      
                                <span style="font-weight: bold;">if</span> (tree.left != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                                {
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tree.left.graphicID);
                                        tree.left = <span style="font-weight: bold; text-decoration: underline;">null</span>;
                                }
                                
                                <span style="font-weight: bold;">if</span> (tree.parent != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                                {
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, tree.parent.graphicID, tree.graphicID);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, tree.parent.graphicID, tree.right.graphicID, LINK_COLOR);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tree.graphicID);
                                        <span style="font-weight: bold;">if</span> (leftchild)
                                        {
                                                tree.parent.left = tree.right;
                                                <span style="font-weight: bold;">if</span> (needFix)
                                                {
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Back node removed.  Increasing child's blackness level"</span>);
                                                        tree.parent.left.blackLevel++;
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(tree.parent.left);
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixExtraBlack(tree.parent.left);
                                                }
                                        }
                                        <span style="font-weight: bold;">else</span>
                                        {
                                                tree.parent.right = tree.right;
                                                <span style="font-weight: bold;">if</span> (needFix)
                                                {
                                                        tree.parent.right.blackLevel++;
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Back node removed.  Increasing child's blackness level"</span>);
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(tree.parent.right);
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixExtraBlack(tree.parent.right);
                                                }
                                                
                                        }
                                        tree.right.parent = tree.parent;
                                }
                                <span style="font-weight: bold;">else</span>
                                {
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tree.graphicID);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot = tree.right;
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.parent = <span style="font-weight: bold; text-decoration: underline;">null</span>;
                                        <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.blackLevel == 0)
                                        {
                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.blackLevel = 1;
                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.graphicID, FOREGROUND_BLACK);
                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.graphicID, BACKGROUND_BLACK);              
                                        }
                                }
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                        }



</pre>
</div>


<ul class="org-ul">
<li>If the value to be deleted is found, we now check if the black level needs a fix or not.</li>
<li>If ony the right subtree is null, the parent of deleted node is set to left child of deleted node.</li>
<li></li>
</ul>
<div class="org-src-container">
<pre class="src src-js" id="org922cf25">



                        <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (tree.right == <span style="font-weight: bold; text-decoration: underline;">null</span> || tree.right.phantomLeaf)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>,  0,<span style="font-style: italic;">"Node to delete has no right child.  \nSet parent of deleted node to left child of deleted node."</span>);
                                <span style="font-weight: bold;">if</span> (tree.right != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                                {
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tree.right.graphicID);
                                        tree.right = <span style="font-weight: bold; text-decoration: underline;">null</span>;                                      
                                }
                                <span style="font-weight: bold;">if</span> (tree.parent != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                                {
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, tree.parent.graphicID, tree.graphicID);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, tree.parent.graphicID, tree.left.graphicID, LINK_COLOR);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tree.graphicID);
                                        <span style="font-weight: bold;">if</span> (leftchild)
                                        {
                                                tree.parent.left = tree.left;
                                                <span style="font-weight: bold;">if</span> (needFix)
                                                {
                                                        tree.parent.left.blackLevel++;
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(tree.parent.left);
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixExtraBlack(tree.parent.left);
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                                                }
                                                <span style="font-weight: bold;">else</span>
                                                {
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Deleted node was red.  No tree rotations required."</span>);                                                                   
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                                                                
                                                }
                                        }
                                        <span style="font-weight: bold;">else</span>
                                        {
                                                tree.parent.right = tree.left;
                                                <span style="font-weight: bold;">if</span> (needFix)
                                                {
                                                        tree.parent.right.blackLevel++;
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(tree.parent.right);
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixExtraBlack(tree.parent.left);
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                                                }
                                                <span style="font-weight: bold;">else</span>
                                                {
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Deleted node was red.  No tree rotations required."</span>);                                                                   
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();                                                              
                                                }
                                        }
                                        tree.left.parent = tree.parent;
                                }
                                <span style="font-weight: bold;">else</span>
                                {
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span> , tree.graphicID);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot = tree.left;
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.parent = <span style="font-weight: bold; text-decoration: underline;">null</span>;
                                        <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.blackLevel == 0)
                                        {
                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.blackLevel = 1;
                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot);
                                        }
                                }
                        }


</pre>
</div>
<ul class="org-ul">
<li>If the value to be deleted is found, we now check if the black level needs a fix or not.</li>
<li>If none of the subtrees are null, we have arrived at 2 children case, where we find the largest node in left subtree, which is also called the inorder succesor of the node.</li>
</ul>

<p>
+To find the inorder successor, we go the left child and keep traversing the right subtree of this left subtree, till we reach the phatom leaf.
+the tmp variables holds the left child. The while loop runs till the right child of the tmp variable is not null.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org0e50ebf">



                        <span style="font-weight: bold;">else</span> <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">tree.left != null &amp;&amp; tree.right != null</span>
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Node to delete has two childern.  \nFind largest node in left subtree."</span>);                                                                       
                                
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex;
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex += 1;
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateHighlightCircle"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, HIGHLIGHT_COLOR, tree.x, tree.y);
                                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">tmp</span> = tree;
                                tmp = tree.left;
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, tmp.x, tmp.y);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);                                                                                                                                                                                                       
                                <span style="font-weight: bold;">while</span> (tmp.right != <span style="font-weight: bold; text-decoration: underline;">null</span> &amp;&amp; !tmp.right.phantomLeaf)
                                {
                                        tmp = tmp.right;
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, tmp.x, tmp.y);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);                                                                                                                                                                                                       
                                }
                                <span style="font-weight: bold;">if</span> (tmp.right != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                                {
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tmp.right.graphicID);
                                        tmp.right = <span style="font-weight: bold; text-decoration: underline;">null</span>;
                                }
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, <span style="font-style: italic;">" "</span>);
                                <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">labelID</span> = <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex;
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.nextIndex += 1;
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateLabel"</span>, labelID, tmp.data, tmp.x, tmp.y);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, labelID, BLUE);
                                tree.data = tmp.data;
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, labelID, tree.x, tree.y);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Copy largest value of left subtree into node to delete."</span>);                                                                      
                                
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetHighlight"</span>, tree.graphicID, 0);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, labelID);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, tree.graphicID, tree.data);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID);                                                   
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Remove node whose value we copied."</span>);                                                                   
                                
                                needFix = tmp.blackLevel &gt; 0;
                                
                                
                                <span style="font-weight: bold;">if</span> (tmp.left == <span style="font-weight: bold; text-decoration: underline;">null</span>)
                                {
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tmp.graphicID);
                                        <span style="font-weight: bold;">if</span> (tmp.parent != tree)
                                        {
                                                tmp.parent.right = <span style="font-weight: bold; text-decoration: underline;">null</span>;
                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                                                <span style="font-weight: bold;">if</span> (needFix)
                                                {
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixRightNull(tmp.parent);
                                                }
                                                <span style="font-weight: bold;">else</span>
                                                {
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Deleted node was red.  No tree rotations required."</span>);                                                                   
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);                                                                       
                                                }
                                        }
                                        <span style="font-weight: bold;">else</span>
                                        {
                                                tree.left = <span style="font-weight: bold; text-decoration: underline;">null</span>;
                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                                                <span style="font-weight: bold;">if</span> (needFix)
                                                {
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixLeftNull(tmp.parent);
                                                }
                                                <span style="font-weight: bold;">else</span>
                                                {
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Deleted node was red.  No tree rotations required."</span>);                                                                   
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);                                                                       
                                                }
                                        }
                                }
                                <span style="font-weight: bold;">else</span>
                                {
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Disconnect"</span>, tmp.parent.graphicID, tmp.graphicID);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Connect"</span>, tmp.parent.graphicID, tmp.left.graphicID, LINK_COLOR);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, tmp.graphicID);
                                        
                                        <span style="font-weight: bold;">if</span> (tmp.parent != tree)
                                        {
                                                tmp.parent.right = tmp.left; 
                                                tmp.left.parent = tmp.parent;
                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                                                
                                                <span style="font-weight: bold;">if</span> (needFix)
                                                {
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Coloring child of deleted node black"</span>);
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                                        tmp.left.blackLevel++;
                                                        <span style="font-weight: bold;">if</span> (tmp.left.phantomLeaf)
                                                        {
                                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetLayer"</span>, tmp.left.graphicID, 0);
                                                        }
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(tmp.left);
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixExtraBlack(tmp.left);
                                                        <span style="font-weight: bold;">if</span> (tmp.left.phantomLeaf)
                                                        {
                                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetLayer"</span>, tmp.left.graphicID, 1);
                                                        }
                                                        
                                                }
                                                <span style="font-weight: bold;">else</span>
                                                {
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Deleted node was red.  No tree rotations required."</span>);                                                                   
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);                                                                       
                                                }
                                        }
                                        <span style="font-weight: bold;">else</span>
                                        {
                                                tree.left = tmp.left;
                                                tmp.left.parent = tree;
                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeTree();
                                                <span style="font-weight: bold;">if</span> (needFix)
                                                {
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Coloring child of deleted node black"</span>);
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                                        tmp.left.blackLevel++;
                                                        <span style="font-weight: bold;">if</span> (tmp.left.phantomLeaf)
                                                        {
                                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetLayer"</span>, tmp.left.graphicID, 0);
                                                        }
                                                        
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixNodeColor(tmp.left);
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.fixExtraBlack(tmp.left);
                                                        <span style="font-weight: bold;">if</span> (tmp.left.phantomLeaf)
                                                        {
                                                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetLayer"</span>, tmp.left.graphicID, 1);
                                                        }
                                                        
                                                }
                                                <span style="font-weight: bold;">else</span>
                                                {
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Deleted node was red.  No tree rotations required."</span>);                                                                   
                                                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);                                                                       
                                                }
                                        }
                                }
                                tmp = tmp.parent;
                                
                        }
                }


</pre>
</div>
<p>
+If the value to be deleted is less than the root node data, we recursively call the delete function on the left subtree, which ultimately reduces to the above mentioned cases.
</p>

<div class="org-src-container">
<pre class="src src-js" id="orgc255830">                <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (valueToDelete &lt; tree.data)
                {
                        <span style="font-weight: bold;">if</span> (tree.left != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateHighlightCircle"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, HIGHLIGHT_COLOR, tree.x, tree.y);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, tree.left.x, tree.left.y);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID);
                        }
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.treeDelete(tree.left, valueToDelete);
                }
                <span style="font-weight: bold;">else</span>
                {
                        <span style="font-weight: bold;">if</span> (tree.right != <span style="font-weight: bold; text-decoration: underline;">null</span>)
                        {
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"CreateHighlightCircle"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, HIGHLIGHT_COLOR, tree.x, tree.y);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID, tree.right.x, tree.right.y);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
                                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Delete"</span>, <span style="font-weight: bold; text-decoration: underline;">this</span>.highlightID);
                        }
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.treeDelete(tree.right, valueToDelete);                                     
                }
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetText"</span>, 0, <span style="font-style: italic;">"Elemet "</span>+valueToDelete+<span style="font-style: italic;">" not found, could not delete"</span>);
        }
        
}


</pre>
</div>
</div>
</div>

<div id="outline-container-org1642df5" class="outline-3">
<h3 id="org1642df5"><span class="section-number-3">1.30</span> Function to fix the node color.</h3>
<div class="outline-text-3" id="text-1-30">
<p>
+If the black node is removed, we have to recolor the node to red, hence black level is checked.
+If the black level is reduced, we recolor the black node to double black.
</p>

<div class="org-src-container">
<pre class="src src-js" id="orgc32010e">


RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.fixNodeColor = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>)
{
        <span style="font-weight: bold;">if</span> (tree.blackLevel == 0)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, tree.graphicID, FOREGROUND_RED);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>, tree.graphicID, BACKGROUND_RED);                                                                 
        }
        <span style="font-weight: bold;">else</span>
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetForegroundColor"</span>, tree.graphicID, FOREGROUND_BLACK);
                <span style="font-weight: bold;">if</span> (tree.blackLevel &gt; 1)
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>,tree.graphicID, BACKGROUND_DOUBLE_BLACK);                 
                }
                <span style="font-weight: bold;">else</span>
                {
                        <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"SetBackgroundColor"</span>,tree.graphicID, BACKGROUND_BLACK);
                }
        }
}


</pre>
</div>
</div>
</div>

<div id="outline-container-orgbdd6443" class="outline-3">
<h3 id="orgbdd6443"><span class="section-number-3">1.31</span> Function resizes the tree according to the start_x and start_y coordinate.</h3>
<div class="outline-text-3" id="text-1-31">
<div class="org-src-container">
<pre class="src src-js" id="orga5a48fb">


RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.resizeTree = <span style="font-weight: bold;">function</span>()
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">startingPoint</span>  = <span style="font-weight: bold; text-decoration: underline;">this</span>.startingX;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.resizeWidths(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot);
        <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot != <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.leftWidth &gt; startingPoint)
                {
                        startingPoint = <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.leftWidth;
                }
                <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.rightWidth &gt; startingPoint)
                {
                        startingPoint = Math.max(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.leftWidth, 2 * startingPoint - <span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot.rightWidth);
                }
                <span style="font-weight: bold; text-decoration: underline;">this</span>.setNewPositions(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot, startingPoint, startingY, 0);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.animateNewPositions(<span style="font-weight: bold; text-decoration: underline;">this</span>.treeRoot);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Step"</span>);
        }
        
}

</pre>
</div>
</div>
</div>


<div id="outline-container-orge0bcffe" class="outline-3">
<h3 id="orge0bcffe"><span class="section-number-3">1.32</span> Function to calculate new positions.</h3>
<div class="outline-text-3" id="text-1-32">
<p>
+Functions calculate new positions based on root node, x and y positions.
</p>


<div class="org-src-container">
<pre class="src src-js" id="orgc30c331">




RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.setNewPositions = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>, <span style="font-weight: bold; font-style: italic;">xPosition</span>, <span style="font-weight: bold; font-style: italic;">yPosition</span>, <span style="font-weight: bold; font-style: italic;">side</span>)
{
        <span style="font-weight: bold;">if</span> (tree != <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                tree.y = yPosition;
                <span style="font-weight: bold;">if</span> (side == -1)
                {
                        xPosition = xPosition - tree.rightWidth;
                        tree.heightLabelX = xPosition - 20;
                }
                <span style="font-weight: bold;">else</span> <span style="font-weight: bold;">if</span> (side == 1)
                {
                        xPosition = xPosition + tree.leftWidth;
                        tree.heightLabelX = xPosition + 20;
                }
                <span style="font-weight: bold;">else</span>
                {
                        tree.heightLabelX = xPosition - 20;
                }
                tree.x = xPosition;
                tree.heightLabelY = tree.y - 20;
                <span style="font-weight: bold; text-decoration: underline;">this</span>.setNewPositions(tree.left, xPosition, yPosition + heightDelta, -1)
                <span style="font-weight: bold; text-decoration: underline;">this</span>.setNewPositions(tree.right, xPosition, yPosition + heightDelta, 1)
        }
        
}
RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.animateNewPositions = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>)
{
        <span style="font-weight: bold;">if</span> (tree != <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold; text-decoration: underline;">this</span>.cmd(<span style="font-style: italic;">"Move"</span>, tree.graphicID, tree.x, tree.y);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.animateNewPositions(tree.left);
                <span style="font-weight: bold; text-decoration: underline;">this</span>.animateNewPositions(tree.right);
        }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org9c440a5" class="outline-3">
<h3 id="org9c440a5"><span class="section-number-3">1.33</span> Function resizes width according to initial positions.</h3>
<div class="outline-text-3" id="text-1-33">
<div class="org-src-container">
<pre class="src src-js" id="org546d595">
RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.resizeWidths = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">tree</span>) 
{
        <span style="font-weight: bold;">if</span> (tree == <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold;">return</span> 0;
        }
        tree.leftWidth = Math.max(<span style="font-weight: bold; text-decoration: underline;">this</span>.resizeWidths(tree.left), widthDelta / 2);
        tree.rightWidth = Math.max(<span style="font-weight: bold; text-decoration: underline;">this</span>.resizeWidths(tree.right), widthDelta / 2);
        <span style="font-weight: bold;">return</span> tree.leftWidth + tree.rightWidth;
}

</pre>
</div>
</div>
</div>


<div id="outline-container-org4af10c9" class="outline-3">
<h3 id="org4af10c9"><span class="section-number-3">1.34</span> Function disables the UI during the animation play so that no other operation or control is available while animation is being played out.</h3>
<div class="outline-text-3" id="text-1-34">
<p>
+Called by our superclass when we get an animation started event &#x2013; need to wait for the
event to finish before we start doing anything
</p>

<div class="org-src-container">
<pre class="src src-js" id="orga8b54b2">
RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.disableUI = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertButton.disabled = <span style="font-weight: bold; text-decoration: underline;">true</span>;
        
        
        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertLeftButton.disabled=<span style="font-weight: bold; text-decoration: underline;">true</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertRightButton.disabled=<span style="font-weight: bold; text-decoration: underline;">true</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.leftrotateButton.disabled=<span style="font-weight: bold; text-decoration: underline;">true</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.rightrotateButton.disabled=<span style="font-weight: bold; text-decoration: underline;">true</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.submitButton.disabled=<span style="font-weight: bold; text-decoration: underline;">true</span>;
        
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org413d484" class="outline-3">
<h3 id="org413d484"><span class="section-number-3">1.35</span> Function enables click on the UI after the animation has been played out</h3>
<div class="outline-text-3" id="text-1-35">
<p>
+Called by our superclass when we get an animation completed event &#x2013; we can now interact again.
</p>

<div class="org-src-container">
<pre class="src src-js" id="orgc37cdb4">

RedBlack.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.enableUI = <span style="font-weight: bold;">function</span>(<span style="font-weight: bold; font-style: italic;">event</span>)
{

        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertButton.disabled = <span style="font-weight: bold; text-decoration: underline;">false</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertLeftButton.disabled=<span style="font-weight: bold; text-decoration: underline;">false</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.insertRightButton.disabled=<span style="font-weight: bold; text-decoration: underline;">false</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.leftrotateButton.disabled=<span style="font-weight: bold; text-decoration: underline;">false</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.rightrotateButton.disabled=<span style="font-weight: bold; text-decoration: underline;">false</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.submitButton.disabled=<span style="font-weight: bold; text-decoration: underline;">false</span>;

}




</pre>
</div>
</div>
</div>



<div id="outline-container-org29a93d5" class="outline-3">
<h3 id="org29a93d5"><span class="section-number-3">1.36</span> Function takes in the id, intial pos_X and pos_Y and initialises the tree node.</h3>
<div class="outline-text-3" id="text-1-36">
<p>
+Determines where the node will get displayed. This function also declares the initial structure for the redblack node. 
</p>

<p>
+Also, a node can have left and right  subtree. There we declare approrpiate data structures here for this.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org09d4599">
<span style="font-weight: bold;">function</span> <span style="font-weight: bold;">RedBlackNode</span>(<span style="font-weight: bold; font-style: italic;">val</span>, <span style="font-weight: bold; font-style: italic;">id</span>, <span style="font-weight: bold; font-style: italic;">initialX</span>, <span style="font-weight: bold; font-style: italic;">initialY</span>)
{
        <span style="font-weight: bold; text-decoration: underline;">this</span>.data = val;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.x = initialX;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.y = initialY;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.blackLevel = 0;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.phantomLeaf = <span style="font-weight: bold; text-decoration: underline;">false</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.graphicID = id;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.left = <span style="font-weight: bold; text-decoration: underline;">null</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.right = <span style="font-weight: bold; text-decoration: underline;">null</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.parent = <span style="font-weight: bold; text-decoration: underline;">null</span>;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.height = 0;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.leftWidth = 0;
        <span style="font-weight: bold; text-decoration: underline;">this</span>.rightWidth = 0;
}

RedBlackNode.<span style="font-weight: bold; text-decoration: underline;">prototype</span>.isLeftChild = <span style="font-weight: bold;">function</span>()
{
        <span style="font-weight: bold;">if</span> (<span style="font-weight: bold; text-decoration: underline;">this</span>.parent == <span style="font-weight: bold; text-decoration: underline;">null</span>)
        {
                <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">true</span>;
        }
        <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">this</span>.parent.left == <span style="font-weight: bold; text-decoration: underline;">this</span>;
}
</pre>
</div>
</div>
</div>


<div id="outline-container-org5fe1116" class="outline-3">
<h3 id="org5fe1116"><span class="section-number-3">1.37</span> Function initialises the canvas on which the tree is rendered and is called first from the UI.</h3>
<div class="outline-text-3" id="text-1-37">
<p>
+It is reponsible for inital setup for rendering. This canvas is then passed to the two three tree constructor as am argument.
</p>

<div class="org-src-container">
<pre class="src src-js" id="org4cff8d0">
<span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">currentAlg</span>;

<span style="font-weight: bold;">function</span> <span style="font-weight: bold;">init</span>()
{
        <span style="font-weight: bold;">var</span> <span style="font-weight: bold; font-style: italic;">animManag</span> = initCanvas();
        currentAlg = <span style="font-weight: bold;">new</span> <span style="font-weight: bold; text-decoration: underline;">RedBlack</span>(animManag, canvas.width, canvas.height);
}




</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb4fcb04" class="outline-2">
<h2 id="orgb4fcb04"><span class="section-number-2">2</span> Tangle</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">
<pre class="src src-js">
&lt;&lt;Inheritance&gt;&gt;
&lt;&lt;AddControls&gt;&gt;
&lt;&lt;Reset&gt;&gt;
&lt;&lt;Declaration&gt;&gt;
&lt;&lt;generateCallBack&gt;&gt;
&lt;&lt;submitCallBack&gt;&gt;
&lt;&lt;wrongsteps&gt;&gt;
&lt;&lt;leftrotate&gt;&gt;
&lt;&lt;rightrotate&gt;&gt;
&lt;&lt;shownext&gt;&gt;
&lt;&lt;insertRight&gt;&gt;
&lt;&lt;insertLeft&gt;&gt;
&lt;&lt;insertCallback&gt;&gt;
&lt;&lt;DeleteCallback&gt;&gt;
&lt;&lt;findCallback&gt;&gt;
&lt;&lt;PrintCallback&gt;&gt;
&lt;&lt;nulleaves&gt;&gt;
&lt;&lt;PrintTree&gt;&gt;
&lt;&lt;PrintTreeRecursive&gt;&gt;
&lt;&lt;FindElement&gt;&gt;
&lt;&lt;findUncle&gt;&gt;
&lt;&lt;blacklevel&gt;&gt;
&lt;&lt;attachnullleaves&gt;&gt;
&lt;&lt;insertWrapper&gt;&gt;
&lt;&lt;rotations&gt;&gt;
&lt;&lt;heightfunctions&gt;&gt;
&lt;&lt;insertAlgorithm&gt;&gt;
&lt;&lt;doublered&gt;&gt;
&lt;&lt;<span style="font-weight: bold;">delete</span>&gt;&gt;
&lt;&lt;fixingNullLeaves&gt;&gt;
&lt;&lt;fixingExtraBlackSubPart1&gt;&gt;
&lt;&lt;fixingExtraBlackSubPart2&gt;&gt;
&lt;&lt;fixDoubleBlack&gt;&gt;
&lt;&lt;deletionAlgorithmSubpart1&gt;&gt;
&lt;&lt;deletionAlgorithmSubpart2&gt;&gt;
&lt;&lt;deletionAlgorithmSubpart3&gt;&gt;
&lt;&lt;deletionAlgorithmSubpart4&gt;&gt;
&lt;&lt;deletionAlgorithmSubpart5&gt;&gt;
&lt;&lt;deletionAlgorithmSubpart6&gt;&gt;
&lt;&lt;fixNodeColor&gt;&gt;
&lt;&lt;ResizeTree&gt;&gt;
&lt;&lt;calculatepositions&gt;&gt;
&lt;&lt;resizeWidth&gt;&gt;
&lt;&lt;DisableUI&gt;&gt;
&lt;&lt;EnableUI&gt;&gt;
&lt;&lt;TreeNode&gt;&gt;
&lt;&lt;InitializeAndRunTree&gt;&gt;
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: VLEAD</p>
<p class="date">Created: 2021-03-17 Wed 07:41</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
